import jqdata

res_codes = []
code_wrapper = [["000963.XSHE", "000028.XSHE", "600763.XSHG", "300015.XSHE", "600535.XSHG", "600332.XSHG", "600276.XSHG", "000999.XSHE", "600557.XSHG", "000538.XSHE", "000423.XSHE", "601607.XSHG", "600750.XSHG", "002223.XSHE", "600267.XSHG", "600196.XSHG", "600161.XSHG", "002275.XSHE", "600518.XSHG", "600079.XSHG", "600422.XSHG", "600993.XSHG", "600380.XSHG", "000078.XSHE", "600789.XSHG", "600062.XSHG", "600285.XSHG", "600479.XSHG", "600297.XSHG", "600329.XSHG", "000597.XSHE", "002118.XSHE", "600252.XSHG", "600216.XSHG", "600351.XSHG", "000623.XSHE", "600572.XSHG", "000756.XSHE", "300181.XSHE", "000788.XSHE", "000919.XSHE", "600085.XSHG", "600055.XSHG", "002099.XSHE", "000516.XSHE", "600713.XSHG", "600666.XSHG", "300049.XSHE", "000766.XSHE", "002107.XSHE", "300006.XSHE", "600812.XSHG", "600829.XSHG", "600664.XSHG", "000952.XSHE", "000990.XSHE", "600511.XSHG"],["002921.XSHE", "002046.XSHE", "002890.XSHE", "601038.XSHG", "300159.XSHE", "300022.XSHE", "603789.XSHG", "600805.XSHG", "000903.XSHE", "000157.XSHE", "603766.XSHG", "603029.XSHG", "000816.XSHE", "603767.XSHG", "603701.XSHG"],["600436.XSHG", "300562.XSHE", "300216.XSHE", "002603.XSHE", "300246.XSHE", "002432.XSHE", "300709.XSHE", "300061.XSHE", "002512.XSHE", "300114.XSHE", "300408.XSHE", "000026.XSHE", "300256.XSHE", "000638.XSHE", "300184.XSHE", "600673.XSHG", "600198.XSHG", "002655.XSHE", "000876.XSHE", "300032.XSHE", "002721.XSHE", "300312.XSHE", "300005.XSHE", "600734.XSHG", "002841.XSHE", "603010.XSHG", "300088.XSHE", "000063.XSHE", "002025.XSHE", "002547.XSHE", "300169.XSHE", "002288.XSHE", "000100.XSHE", "002635.XSHE", "002579.XSHE", "000725.XSHE", "002079.XSHE", "600260.XSHG", "603111.XSHG", "300433.XSHE", "000670.XSHE", "300493.XSHE", "002855.XSHE", "600122.XSHG", "300431.XSHE", "002681.XSHE", "002217.XSHE", "002351.XSHE", "600584.XSHG", "002280.XSHE", "300003.XSHE", "300007.XSHE", "300136.XSHE", "002618.XSHE", "002292.XSHE", "600460.XSHG", "000913.XSHE", "300496.XSHE", "601231.XSHG", "002156.XSHE", "002036.XSHE", "300327.XSHE", "000636.XSHE", "300227.XSHE", "600345.XSHG", "002273.XSHE", "002241.XSHE", "300115.XSHE", "000050.XSHE", "300236.XSHE", "300223.XSHE", "000049.XSHE", "300221.XSHE", "601360.XSHG", "002861.XSHE", "002230.XSHE", "002870.XSHE", "002925.XSHE"],["603160.XSHG", "300661.XSHE", "300474.XSHE", "002916.XSHE", "603019.XSHG", "300672.XSHE", "002371.XSHE", "300046.XSHE", "300623.XSHE", "300708.XSHE", "002745.XSHE", "300613.XSHE", "600487.XSHG", "603501.XSHG", "600703.XSHG", "300671.XSHE", "300323.XSHE", "300598.XSHE", "603078.XSHG", "300053.XSHE", "002161.XSHE", "600666.XSHG", "300656.XSHE", "300373.XSHE", "603010.XSHG", "000988.XSHE", "300102.XSHE", "002151.XSHE", "300201.XSHE", "002429.XSHE", "600667.XSHG", "002185.XSHE", "601137.XSHG", "300666.XSHE", "300077.XSHE", "000818.XSHE", "300131.XSHE", "002436.XSHE", "002218.XSHE", "002079.XSHE", "600360.XSHG", "002049.XSHE", "300098.XSHE", "300458.XSHE", "000670.XSHE", "300493.XSHE", "002023.XSHE", "600584.XSHG", "300054.XSHE", "000021.XSHE", "600770.XSHG", "002245.XSHE", "600171.XSHG", "300101.XSHE", "002725.XSHE", "300456.XSHE", "002618.XSHE", "000936.XSHE", "600206.XSHG", "002119.XSHE", "600460.XSHG", "002236.XSHE", "002156.XSHE", "300667.XSHE", "300327.XSHE", "002405.XSHE", "000997.XSHE", "603005.XSHG", "000810.XSHE", "300353.XSHE", "002402.XSHE", "300183.XSHE", "000938.XSHE", "300514.XSHE", "300236.XSHE", "002281.XSHE", "300223.XSHE", "002180.XSHE", "300590.XSHE", "002409.XSHE", "603986.XSHG"],["600986.XSHG", "600804.XSHG", "600640.XSHG", "002539.XSHE", "000016.XSHE", "002591.XSHE", "002115.XSHE", "000810.XSHE", "000676.XSHE", "600652.XSHG", "002517.XSHE", "002577.XSHE", "300467.XSHE"]]
for codes in code_wrapper:
    res = []
    for code in codes:
        df_stock = get_price(code, end_date='2018-03-28', frequency='daily', fields=['close'], skip_paused=True, fq='pre', count=11)
        last = df_stock.iloc[-1]
        first = df_stock.iloc[0]
        p_change = (last['close'] - first['close']) / first['close'] * 100  
        if len(res) == 0:
           res.append({'code' : code, 'p_change' : p_change})  
        else:
            flag = False        
            for index,obj in enumerate(res):
                if obj['p_change'] < p_change:
                   res.insert(index,{'code' : code, 'p_change' : p_change}) 
                   flag = True
                   break
            if flag == False:   
               res.append({'code' : code, 'p_change' : p_change})  
          
    for index,obj in enumerate(res):
        if index < 10:
           code = obj['code']
           code = code.replace('.XSHE','').replace('.XSHG','')
           if code not in res_codes:
              res_codes.append(code)
       
print(res_codes)