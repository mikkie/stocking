# -*-coding=utf-8-*-
__author__ = 'aqua'

import download
import hcdata
import hitTopTest2
import datetime as dt
from datetime import timedelta
"""
   This is for test
"""

if __name__ == '__main__':
   # code_pre_close_map = [('000760','3.58')]
   # date = '20180919'

   code_pre_close_map = [('000009', '4.56'), ('000532', '12.1'), ('000533', '4.02'), ('000571', '3.38'), ('000917', '5.58'), ('000931', '7.13'), ('000936', '6.01'), ('002028', '10.58'), ('002072', '8.28'), ('002137', '7.81'), ('002177', '3.4'), ('002354', '6.41'), ('002367', '5.38'), ('002464', '10.84'), ('002495', '3.06'), ('002623', '16.82'), ('002670', '9.35'), ('002680', '3.57'), ('002687', '6.35'), ('002722', '16.39'), ('002732', '15.91'), ('002875', '14.66'), ('002913', '41.67'), ('300100', '9.15'), ('300181', '4.34'), ('300187', '6.16'), ('300277', '6.51'), ('300283', '5.6'), ('300343', '7.73'), ('300462', '14.54'), ('300471', '6.9'), ('300473', '34.81'), ('300513', '23.77'), ('300525', '24.55'), ('300533', '32.68'), ('300553', '33.31'), ('300603', '24.8'), ('300606', '16.62'), ('300613', '95.6'), ('300636', '18.7'), ('300637', '21.2'), ('300652', '20.71'), ('300670', '21.51'), ('300681', '39.38'), ('300688', '50.85'), ('300695', '58.41'), ('300709', '28.44'), ('300730', '21.55'), ('300738', '43.24'), ('600053', '20.98'), ('600080', '10.56'), ('600247', '4.86'), ('600446', '10.68'), ('600462', '4.03'), ('600512', '2.39'), ('600635', '4.62'), ('600689', '12.63'), ('600730', '5.16'), ('600736', '5.98'), ('600783', '17.29'), ('600862', '5.9'), ('600895', '15.1'), ('601200', '13.59'), ('601969', '4.93'), ('603083', '22.58'), ('603101', '14.19'), ('603136', '28.49'), ('603180', '54.51'), ('603208', '25.98'), ('603220', '7.85'), ('603330', '21.31'), ('603358', '11.17'), ('603389', '13.53'), ('603661', '32.65'), ('603706', '29.7'), ('603776', '21.4'), ('603801', '26.98')]
   date = '20181115'
   date_next = '20181015'
   load_dir = '../../data/excels'
   compare_dir = '../../data/compare'

   hcdata.removeall(load_dir)
   code_list = download.download(code_pre_close_map, date, load_dir)
   df_list = hcdata.loaddata(load_dir, save=False)
   result = hitTopTest2.start_test_by_df(df_list)
#    if len(result) > 0:
#       hcdata.removeall(compare_dir)
#       download.download(result, date_next, compare_dir) 
#       compare_list = hcdata.loaddata(compare_dir, save=False)
#       if len(compare_list) > 0:
#          for res in result:
#              for df in compare_list:
#                  if df.iloc[0]['code'] == res[0]:
#                     avg = (df.iloc[0]['price'] + df.iloc[-1]['price'] + df['price'].min() + df['price'].max()) / 4
#                     print('[%s] buyed price=%s, next day: avg=%s, open=%s, close=%s, low=%s, high=%s' % (res[0], res[1], avg, df.iloc[0]['price'], df.iloc[-1]['price'], df['price'].min(), df['price'].max()))
#                     continue 
          
           





