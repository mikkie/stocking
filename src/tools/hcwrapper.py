# -*-coding=utf-8-*-
__author__ = 'aqua'

import download
import hcdata
import hitTopTest2
import datetime as dt
from datetime import timedelta
"""
   This is for test
"""

if __name__ == '__main__':
   # code_pre_close_map = [('000760','3.58')]
   # date = '20180919'

   code_pre_close_map = [('000018', '2.16'), ('000034', '14.78'), ('000159', '4.13'), ('000409', '4.43'), ('000422', '2.72'), ('000503', '14.11'), ('000530', '3.3'), ('000533', '3.02'), ('000536', '2.13'), ('000570', '3.84'), ('000585', '2.14'), ('000622', '7.9'), ('000626', '7.29'), ('000632', '4.05'), ('000638', '6.38'), ('000655', '3.38'), ('000707', '2.77'), ('000755', '4.57'), ('000811', '5.16'), ('000816', '1.47'), ('000820', '7.02'), ('000835', '4.33'), ('000868', '3.84'), ('000892', '5.08'), ('000893', '4.16'), ('000899', '4.14'), ('000917', '4.99'), ('000929', '6.7'), ('000939', '1.3'), ('000953', '4.25'), ('000957', '4.69'), ('000972', '2.69'), ('000982', '1.36'), ('000995', '6.01'), ('002011', '4.63'), ('002018', '1.26'), ('002034', '12.33'), ('002076', '3.2'), ('002102', '1.94'), ('002143', '3.26'), ('002148', '5.51'), ('002188', '3.39'), ('002194', '5.23'), ('002202', '9.89'), ('002207', '4.85'), ('002213', '7.83'), ('002239', '2.17'), ('002259', '2.52'), ('002263', '1.81'), ('002328', '6.19'), ('002417', '8.33'), ('002445', '2.42'), ('002453', '4.76'), ('002473', '6.37'), ('002495', '2.83'), ('002496', '2.05'), ('002509', '2.42'), ('002513', '6.02'), ('002534', '5.2'), ('002547', '3.75'), ('002552', '4.44'), ('002604', '1.83'), ('002636', '7.15'), ('002666', '3.74'), ('002676', '3.19'), ('002723', '8.46'), ('002896', '33.3'), ('002940', '47.85'), ('300069', '10.07'), ('300070', '9.08'), ('300090', '2.53'), ('300128', '3.27'), ('300156', '4.39'), ('300163', '3.21'), ('300168', '11.73'), ('300187', '5.31'), ('300216', '4.55'), ('300274', '7.26'), ('300279', '5.38'), ('300283', '4.21'), ('300299', '4.26'), ('300342', '8.12'), ('300505', '26.48'), ('300525', '20.15'), ('300685', '41.96'), ('300695', '53.04'), ('300742', '43.1'), ('600020', '3.52'), ('600074', '1.36'), ('600130', '3.39'), ('600186', '1.99'), ('600193', '2.95'), ('600202', '3.75'), ('600209', '3.29'), ('600212', '4.07'), ('600213', '6.32'), ('600226', '2.9'), ('600234', '6.89'), ('600238', '4.75'), ('600243', '4.18'), ('600247', '4.47'), ('600250', '7.48'), ('600255', '1.98'), ('600275', '2.81'), ('600289', '2.4'), ('600321', '1.86'), ('600335', '6.44'), ('600393', '2.39'), ('600397', '2.24'), ('600421', '6.37'), ('600446', '8.96'), ('600551', '7.55'), ('600556', '3.35'), ('600610', '1.7'), ('600634', '2.39'), ('600654', '2.11'), ('600696', '3.9'), ('600701', '2.95'), ('600732', '4.18'), ('600744', '2.83'), ('600747', '1.39'), ('600807', '2.34'), ('600817', '7.11'), ('600824', '3.48'), ('600864', '4.18'), ('600870', '2.84'), ('600896', '4.01'), ('601558', '1.13'), ('603028', '6.86'), ('603059', '31.63'), ('603186', '13.53'), ('603305', '27.01'), ('603383', '26.38'), ('603389', '10.16'), ('603603', '13.0'), ('603879', '9.67')]
   date = '20181112'
   date_next = '20181015'
   load_dir = '../../data/excels'
   compare_dir = '../../data/compare'

#    hcdata.removeall(load_dir)
#    code_list = download.download(code_pre_close_map, date, load_dir)
   df_list = hcdata.loaddata(load_dir, save=False)
   result = hitTopTest2.start_test_by_df(df_list)
#    if len(result) > 0:
#       hcdata.removeall(compare_dir)
#       download.download(result, date_next, compare_dir) 
#       compare_list = hcdata.loaddata(compare_dir, save=False)
#       if len(compare_list) > 0:
#          for res in result:
#              for df in compare_list:
#                  if df.iloc[0]['code'] == res[0]:
#                     avg = (df.iloc[0]['price'] + df.iloc[-1]['price'] + df['price'].min() + df['price'].max()) / 4
#                     print('[%s] buyed price=%s, next day: avg=%s, open=%s, close=%s, low=%s, high=%s' % (res[0], res[1], avg, df.iloc[0]['price'], df.iloc[-1]['price'], df['price'].min(), df['price'].max()))
#                     continue 
          
           





