#!/usr/bin/env python
#-*- coding: utf-8 -*-

"""使用urllib2请求代理服务器
请求http和https网页均适用
"""

import threading
import tushare
import datetime
import sys
sys.path.append('..')
import src.t1.trade.ProxyManager

#要访问的目标网页
code_list = ['603999', '603998', '603996', '603988', '603987', '603978', '603977', '603976', '603970', '603969', '603966', '603963', '603960', '603959', '603958', '603955', '603937', '603933', '603929', '603928', '603926', '603922', '603918', '603917', '603916', '603912', '603908', '603903', '603901', '603897', '603890', '603888', '603887', '603886', '603882', '603881', '603876', '603869', '603861', '603860', '603859', '603856', '603848', '603829', '603822', '603819', '603817', '603813', '603811', '603809', '603800', '603798', '603797', '603779', '603778', '603777', '603776', '603738', '603733', '603727', '603725', '603722', '603721', '603718', '603717', '603716', '603712', '603711', '603709', '603707', '603701', '603689', '603688', '603685', '603683', '603680', '603677', '603676', '603669', '603668', '603661', '603656', '603655', '603648', '603638', '603637', '603633', '603630', '603628', '603626', '603619', '603618', '603615', '603612', '603608', '603607', '603605', '603603', '603598', '603596', '603577', '603559', '603557', '603533', '603528', '603527', '603518', '603516', '603507', '603505', '603500', '603499', '603496', '603488', '603477', '603466', '603458', '603429', '603421', '603398', '603396', '603393', '603388', '603386', '603383', '603378', '603367', '603366', '603365', '603363', '603359', '603356', '603336', '603330', '603329', '603323', '603322', '603321', '603320', '603319', '603309', '603305', '603300', '603299', '603289', '603283', '603278', '603277', '603269', '603266', '603258', '603238', '603229', '603227', '603218', '603200', '603197', '603196', '603189', '603186', '603183', '603181', '603179', '603177', '603168', '603166', '603165', '603161', '603157', '603138', '603136', '603131', '603129', '603128', '603126', '603118', '603110', '603106', '603103', '603101', '603100', '603099', '603098', '603089', '603088', '603086', '603083', '603080', '603079', '603076', '603069', '603067', '603063', '603060', '603059', '603058', '603056', '603055', '603042', '603040', '603036', '603035', '603033', '603029', '603028', '603027', '603026', '603023', '603022', '603013', '603011', '603010', '603009', '603007', '601965', '601949', '601908', '601882', '601858', '601838', '601828', '601611', '601595', '601519', '601518', '601500', '601388', '601375', '601326', '601228', '601222', '601212', '601199', '601177', '601116', '601108', '601086', '601038', '601019', '601015', '601011', '601002', '600997', '600992', '600986', '600985', '600983', '600981', '600980', '600973', '600962', '600960', '600939', '600933', '600929', '600908', '600903', '600901', '600898', '600890', '600889', '600888', '600876', '600868', '600866', '600865', '600862', '600860', '600857', '600855', '600853', '600848', '600847', '600846', '600841', '600838', '600833', '600830', '600828', '600825', '600822', '600821', '600818', '600815', '600814', '600812', '600810', '600802', '600798', '600794', '600793', '600792', '600789', '600783', '600781', '600776', '600774', '600773', '600770', '600769', '600756', '600743', '600740', '600736', '600735', '600730', '600727', '600726', '600722', '600721', '600716', '600715', '600710', '600708', '600698', '600692', '600689', '600684', '600677', '600676', '600675', '600667', '600662', '600657', '600653', '600652', '600650', '600647', '600645', '600644', '600636', '600630', '600626', '600624', '600621', '600620', '600619', '600618', '600617', '600616', '600614', '600609', '600602', '600601', '600595', '600594', '600592', '600581', '600580', '600579', '600577', '600571', '600569', '600560', '600558', '600555', '600552', '600550', '600546', '600540', '600537', '600532', '600531', '600530', '600527', '600523', '600520', '600517', '600513', '600495', '600476', '600469', '600468', '600463', '600462', '600459', '600456', '600455', '600444', '600433', '600422', '600419', '600416', '600405', '600400', '600391', '600390', '600389', '600387', '600386', '600385', '600381', '600378', '600371', '600370', '600367', '600363', '600361', '600360', '600359', '600358', '600354', '600353', '600351', '600345', '600343', '600339', '600333', '600313', '600311', '600306', '600303', '600300', '600295', '600288', '600284', '600283', '600281', '600278', '600272', '600268', '600261', '600255', '600251', '600250', '600249', '600248', '600246', '600241', '600239', '600237', '600231', '600227', '600222', '600215', '600213', '600211', '600207', '600206', '600199', '600192', '600191', '600187', '600186', '600184', '600182', '600178', '600172', '600171', '600167', '600159', '600155', '600152', '600146', '600139', '600137', '600135', '600131', '600129', '600119', '600117', '600113', '600112', '600099', '600095', '600088', '600082', '600077', '600072', '600071', '600055', '600053', '600025', '300741', '300740', '300739', '300737', '300736', '300735', '300733', '300731', '300730', '300729', '300727', '300726', '300723', '300722', '300721', '300720', '300719', '300718', '300717', '300716', '300715', '300712', '300711', '300710', '300708', '300707', '300706', '300705', '300703', '300702', '300701', '300699', '300698', '300697', '300696', '300693', '300692', '300690', '300689', '300687', '300686', '300680', '300677', '300675', '300673', '300664', '300660', '300659', '300658', '300657', '300656', '300655', '300654', '300650', '300649', '300643', '300634', '300631', '300629', '300627', '300623', '300622', '300621', '300620', '300619', '300617', '300615', '300612', '300611', '300610', '300609', '300608', '300606', '300605', '300602', '300599', '300598', '300597', '300596', '300595', '300593', '300591', '300590', '300589', '300587', '300585', '300581', '300580', '300579', '300578', '300576', '300573', '300570', '300568', '300566', '300565', '300563', '300562', '300560', '300559', '300557', '300556', '300555', '300553', '300552', '300551', '300550', '300548', '300547', '300546', '300543', '300542', '300541', '300540', '300539', '300537', '300536', '300535', '300533', '300532', '300531', '300530', '300529', '300528', '300527', '300526', '300525', '300522', '300521', '300520', '300519', '300517', '300515', '300509', '300508', '300507', '300506', '300505', '300504', '300503', '300502', '300501', '300496', '300494', '300493', '300492', '300484', '300474', '300468', '300466', '300465', '300462', '300460', '300459', '300457', '300455', '300453', '300452', '300451', '300435', '300431', '300429', '300428', '300427', '300426', '300425', '300422', '300420', '300414', '300413', '300412', '300409', '300403', '300402', '300399', '300398', '300397', '300396', '300394', '300391', '300390', '300389', '300387', '300386', '300380', '300379', '300378', '300377', '300375', '300374', '300371', '300370', '300368', '300367', '300366', '300365', '300363', '300362', '300360', '300359', '300356', '300355', '300353', '300352', '300349', '300346', '300344', '300341', '300340', '300339', '300334', '300333', '300331', '300328', '300327', '300326', '300325', '300322', '300321', '300318', '300314', '300313', '300304', '300303', '300302', '300300', '300298', '300295', '300293', '300291', '300288', '300283', '300279', '300278', '300277', '300276', '300275', '300273', '300272', '300271', '300268', '300267', '300265', '300263', '300262', '300260', '300256', '300255', '300254', '300252', '300250', '300249', '300248', '300247', '300244', '300243', '300242', '300240', '300239', '300237', '300236', '300235', '300234', '300231', '300228', '300227', '300223', '300220', '300216', '300213', '300211', '300209', '300208', '300206', '300205', '300201', '300200', '300192', '300191', '300189', '300188', '300183', '300181', '300177', '300175', '300173', '300171', '300167', '300163', '300162', '300161', '300158', '300157', '300156', '300155', '300153', '300152', '300151', '300150', '300149', '300148', '300145', '300143', '300141', '300140', '300139', '300135', '300134', '300132', '300130', '300123', '300117', '300116', '300114', '300113', '300112', '300110', '300109', '300107', '300106', '300105', '300102', '300101', '300100', '300099', '300095', '300093', '300092', '300085', '300084', '300083', '300079', '300078', '300077', '300076', '300075', '300069', '300066', '300065', '300063', '300062', '300058', '300056', '300052', '300046', '300045', '300043', '300041', '300038', '300037', '300036', '300035', '300034', '300031', '300030', '300029', '300028', '300025', '300022', '300021', '300020', '300019', '300016', '300013', '300011', '300010', '300007', '300005', '300002', '002929', '002928', '002927', '002926', '002923', '002922', '002921', '002920', '002919', '002918', '002917', '002915', '002913', '002911', '002910', '002908', '002907', '002906', '002905', '002903', '002902', '002901', '002900', '002899', '002898', '002897', '002896', '002895', '002893', '002892', '002891', '002890', '002889', '002888', '002881', '002879', '002878', '002877', '002873', '002871', '002870', '002869', '002868', '002864', '002858', '002857', '002853', '002852', '002850', '002849', '002848', '002847', '002846', '002845', '002843', '002842', '002839', '002837', '002836', '002835', '002830', '002829', '002828', '002827', '002826', '002825', '002824', '002823', '002822', '002820', '002818', '002817', '002816', '002815', '002813', '002811', '002809', '002808', '002807', '002806', '002805', '002802', '002800', '002799', '002796', '002795', '002793', '002790', '002789', '002788', '002787', '002786', '002785', '002783', '002782', '002781', '002780', '002779', '002758', '002757', '002755', '002753', '002750', '002748', '002746', '002743', '002742', '002740', '002738', '002733', '002730', '002729', '002728', '002725', '002724', '002722', '002715', '002709', '002708', '002703', '002702', '002700', '002698', '002697', '002696', '002695', '002694', '002693', '002691', '002689', '002687', '002685', '002681', '002679', '002676', '002675', '002670', '002669', '002668', '002667', '002666', '002662', '002660', '002657', '002655', '002652', '002651', '002646', '002645', '002644', '002642', '002638', '002635', '002634', '002633', '002631', '002629', '002628', '002625', '002622', '002619', '002618', '002616', '002613', '002607', '002606', '002605', '002600', '002596', '002591', '002590', '002587', '002581', '002580', '002577', '002576', '002575', '002571', '002567', '002566', '002562', '002553', '002551', '002549', '002547', '002546', '002545', '002544', '002543', '002542', '002535', '002528', '002527', '002524', '002523', '002519', '002517', '002516', '002515', '002514', '002513', '002510', '002509', '002504', '002503', '002499', '002497', '002496', '002494', '002490', '002486', '002481', '002478', '002476', '002472', '002471', '002467', '002461', '002458', '002455', '002454', '002453', '002452', '002446', '002441', '002438', '002436', '002434', '002432', '002428', '002424', '002423', '002417', '002409', '002407', '002402', '002401', '002400', '002389', '002388', '002378', '002377', '002376', '002370', '002367', '002365', '002362', '002361', '002355', '002351', '002348', '002347', '002346', '002342', '002339', '002338', '002336', '002333', '002329', '002323', '002322', '002321', '002318', '002315', '002312', '002308', '002307', '002305', '002300', '002297', '002296', '002290', '002289', '002288', '002282', '002279', '002278', '002276', '002265', '002264', '002261', '002248', '002246', '002240', '002238', '002237', '002235', '002234', '002232', '002231', '002229', '002228', '002225', '002222', '002220', '002214', '002213', '002212', '002211', '002209', '002201', '002200', '002199', '002192', '002190', '002189', '002186', '002181', '002177', '002175', '002173', '002172', '002169', '002168', '002164', '002163', '002161', '002158', '002149', '002148', '002144', '002141', '002137', '002136', '002134', '002133', '002125', '002123', '002118', '002115', '002112', '002109', '002107', '002106', '002103', '002095', '002093', '002088', '002080', '002079', '002076', '002073', '002069', '002068', '002066', '002058', '002054', '002046', '002045', '002041', '002040', '002037', '002036', '002031', '002026', '002025', '002023', '002022', '002021', '002017', '002015', '002014', '002012', '002006', '000996', '000993', '000987', '000985', '000980', '000971', '000968', '000962', '000958', '000957', '000955', '000952', '000936', '000930', '000928', '000927', '000926', '000923', '000920', '000917', '000913', '000911', '000909', '000908', '000906', '000905', '000901', '000890', '000886', '000885', '000882', '000881', '000877', '000868', '000862', '000856']

proxyManager = src.t1.trade.ProxyManager.ProxyManager()


def async_exe(df,data):
    # print(df['name'])
    pass

def fun_timer():
    try:
        print(proxyManager.get_proxy_size())
        starttime = datetime.datetime.now()
        proxyManager.get_realtime_quotes(code_list,'data',batch_size=100)
        endtime = datetime.datetime.now()
        print('times= %s' % (endtime - starttime).seconds)
    except Exception as e:
           print(e)
    global timer
    timer = threading.Timer(3, fun_timer)
    timer.start()

timer = threading.Timer(3, fun_timer)
timer.start()        